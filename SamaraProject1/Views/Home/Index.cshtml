@{
    ViewData["Title"] = "Inicio - Feria Sámara Market";
}

<div class="min-h-screen">
    <!-- Hero Section with Carousel -->
    <div class="relative overflow-hidden bg-white">
        <div class="mx-auto max-w-7xl">
            <div class="relative z-10 pb-8 sm:pb-16 md:pb-20 lg:w-full lg:max-w-2xl lg:pb-28 xl:pb-32">
                <main class="mx-auto mt-10 max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                    <div class="sm:text-center lg:text-left">
                        <h1 class="text-3xl font-light tracking-wide text-gray-800 sm:text-4xl md:text-5xl">
                            <span class="block">Bienvenidos a</span>
                            <span class="block mt-1 bg-gradient-to-r from-blue-500 to-indigo-600 bg-clip-text text-transparent font-medium">
                                Feria Sámara Market
                            </span>
                        </h1>

                        <p class="mt-5 text-sm text-gray-600 sm:text-base md:text-lg lg:pr-16 lg:max-w-lg leading-relaxed font-light">
                            Descubre productos únicos de alta calidad hechos en Costa Rica. Conoce artesanos talentosos,
                            agricultores y productores locales. Apoya el comercio local y vive una experiencia auténtica
                            llena de cultura en el mejor ambiente de playa.
                        </p>

                        <div class="mt-8 sm:mt-10 sm:flex sm:justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4">
                            <a href="@Url.Action("ListaPublica", "Producto")"
                               class="group flex items-center justify-center px-6 py-3 sm:py-3.5 rounded-full
                          bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-sm sm:text-base
                          font-medium tracking-wide shadow-md hover:shadow-lg transition-all duration-300
                          transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2
                          focus:ring-blue-400">
                                <span>Explorar Productos</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 group-hover:translate-x-1 transition-transform duration-300"
                                     viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z"
                                          clip-rule="evenodd" />
                                </svg>
                            </a>

                            <a href="@Url.Action("ListaPublica", "Stands")"
                               class="flex items-center justify-center px-6 py-3 sm:py-3.5 rounded-full
                          bg-white border border-gray-200 text-gray-700 text-sm sm:text-base
                          font-medium tracking-wide shadow-sm hover:shadow hover:bg-gray-50
                          hover:text-blue-600 hover:border-blue-200 transition-all duration-300
                          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200">
                                Stands
                            </a>

                            <a href="@Url.Action("ListaPublica", "Emprendedor")"
                               class="flex items-center justify-center px-6 py-3 sm:py-3.5 rounded-full
                          bg-white border border-gray-200 text-gray-700 text-sm sm:text-base
                          font-medium tracking-wide shadow-sm hover:shadow hover:bg-gray-50
                          hover:text-blue-600 hover:border-blue-200 transition-all duration-300
                          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200">
                                Emprendedores
                            </a>
                        </div>
                    </div>
                </main>
            </div>


        </div>
        <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 relative">
            <!-- Carousel -->
            <div id="carousel" class="relative h-56 sm:h-72 md:h-96 lg:h-full">
                <!-- Botón anterior -->
                <button id="prevButton" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6 text-gray-800">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <!-- Botón siguiente -->
                <button id="nextButton" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6 text-gray-800">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
                <!-- Indicadores -->
                <div id="indicators" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                    <!-- Los indicadores se insertarán dinámicamente aquí -->
                </div>
            </div>
        </div>
    </div>



    </div>

<!-- Features Section -->
<div class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="lg:text-center">
            <h2 class="text-base text-blue-600 font-semibold tracking-wide uppercase">Características</h2>
            <p class="mt-2 text-3xl leading-8 font-bold tracking-tight text-gray-900 sm:text-4xl">
                Una mejor manera de mostrar productos locales
            </p>
            <p class="mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto">
                Descubre todo lo que Feria Sámara Market tiene para ofrecer.
            </p>
        </div>

        <div class="mt-10">
            <div class="space-y-10 md:space-y-0 md:grid md:grid-cols-2 md:gap-x-8 md:gap-y-10">
                <!-- Feature 1 -->
                <div class="relative">
                    <div class="absolute flex h-12 w-12 items-center justify-center rounded-md bg-blue-500 text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                        </svg>
                    </div>
                    <div class="ml-16">
                        <h3 class="text-lg font-medium leading-6 text-gray-900">Productos Locales</h3>
                        <p class="mt-2 text-base text-gray-500">
                            Encuentra una amplia variedad de productos locales, desde artesanías hasta productos gourmet.
                        </p>
                    </div>
                </div>

                <!-- Feature 2 -->
                <div class="relative">
                    <div class="absolute flex h-12 w-12 items-center justify-center rounded-md bg-blue-500 text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                        </svg>
                    </div>
                    <div class="ml-16">
                        <h3 class="text-lg font-medium leading-6 text-gray-900">Emprendedores Locales</h3>
                        <p class="mt-2 text-base text-gray-500">
                            Conoce a los talentosos emprendedores detrás de cada producto y sus historias únicas.
                        </p>
                    </div>
                </div>

                <!-- Feature 3 -->
                <div class="relative">
                    <div class="absolute flex h-12 w-12 items-center justify-center rounded-md bg-blue-500 text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 21v-7.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349m-16.5 11.65V9.35m0 0a3.001 3.001 0 003.75-.615A2.993 2.993 0 009.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 002.25 1.016c.896 0 1.7-.393 2.25-1.016a3.001 3.001 0 003.75.614m-16.5 0a3.004 3.004 0 01-.621-4.72L4.318 3.44A1.5 1.5 0 015.378 3h13.243a1.5 1.5 0 011.06.44l1.19 1.189a3 3 0 01-.621 4.72m-13.5 8.65h3.75a.75.75 0 00.75-.75V13.5a.75.75 0 00-.75-.75H6.75a.75.75 0 00-.75.75v3.75c0 .415.336.75.75.75z" />
                        </svg>
                    </div>
                    <div class="ml-16">
                        <h3 class="text-lg font-medium leading-6 text-gray-900">Stands Únicos</h3>
                        <p class="mt-2 text-base text-gray-500">
                            Visita stands cuidadosamente diseñados para mostrar lo mejor de cada emprendedor.
                        </p>
                    </div>
                </div>

                <!-- Feature 4 -->
                <div class="relative">
                    <div class="absolute flex h-12 w-12 items-center justify-center rounded-md bg-blue-500 text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z" />
                        </svg>
                    </div>
                    <div class="ml-16">
                        <h3 class="text-lg font-medium leading-6 text-gray-900">Eventos Especiales</h3>
                        <p class="mt-2 text-base text-gray-500">
                            Participa en eventos especiales, talleres y presentaciones durante todo el año.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- YouTube Video Section - Elegante y Minimalista -->
<section class="py-16 sm:py-20">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Encabezado elegante -->
        <div class="text-center mb-10">
            <h2 class="text-2xl sm:text-3xl tracking-wide text-gray-800">
                <span class="font-light">DESCUBRE</span> <span class="font-medium">FERIA SÁMARA MARKET</span>
            </h2>
            <div class="w-24 h-0.5 bg-blue-400 mx-auto mt-4 mb-10"></div>
        </div>

        <!-- Contenedor del video - Simplificado para mejor compatibilidad -->
        <div class="max-w-4xl mx-auto">
            <div class="relative rounded-lg overflow-hidden shadow-lg">
                <!-- Proporción 16:9 mantenida con aspect-ratio -->
                <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                    <iframe src="https://www.youtube.com/embed/25V7mPgLubI?rel=0"
                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"
                            allowfullscreen
                            loading="lazy"
                            title="Video de Feria Sámara Market">
                    </iframe>
                </div>
            </div>

            <!-- Descripción -->
            <p class="mt-8 text-center text-base text-gray-600 max-w-2xl mx-auto">
                Explora nuestra feria y conoce la experiencia única que ofrecemos en el corazón de Playa Sámara.
            </p>
        </div>
    </div>
</section>


<!-- Carrusel de Productos Destacados - Elegante y Minimalista -->
<section class="py-16 sm:py-20 bg-gradient-to-b from-white to-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-8">
            <h2 class="text-xl sm:text-2xl font-extralight tracking-widest text-gray-700 uppercase">
                Productos <span class="font-normal text-gray-900">Destacados</span>
            </h2>
            <div class="w-16 h-px bg-gradient-to-r from-transparent via-blue-400 to-transparent mx-auto mt-3 mb-4"></div>
            <p id="current-product-name" class="text-sm sm:text-base text-gray-500 font-light max-w-lg mx-auto italic"></p>
        </div>


        <div class="relative" id="featured-carousel">
            <!-- Contenedor principal del carrusel -->
            <div id="featured-slides" class="relative w-full overflow-hidden rounded-lg shadow-sm" style="height: 400px;">
                <!-- Las imágenes se cargarán dinámicamente aquí -->
            </div>

            <!-- Botones de navegación elegantes -->
            <button id="prevFeatured" class="absolute left-2 sm:left-4 top-1/2 transform -translate-y-1/2 bg-white/80 backdrop-blur-sm shadow-sm rounded-full p-2.5 sm:p-3 hover:bg-white hover:shadow transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-200 z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
                <span class="sr-only">Anterior</span>
            </button>

            <button id="nextFeatured" class="absolute right-2 sm:right-4 top-1/2 transform -translate-y-1/2 bg-white/80 backdrop-blur-sm shadow-sm rounded-full p-2.5 sm:p-3 hover:bg-white hover:shadow transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-200 z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
                <span class="sr-only">Siguiente</span>
            </button>

            <!-- Indicadores de posición (dots) - Se generarán dinámicamente -->
            <div class="flex justify-center mt-6" id="carousel-indicators"></div>
        </div>
    </div>
</section>

<section class="py-16 bg-gradient-to-b from-gray-50 to-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
            <h2 class="text-xl sm:text-2xl font-extralight tracking-widest text-gray-700 uppercase">
                Próximos <span class="font-normal text-gray-900">Eventos</span>
            </h2>
            <div class="w-16 h-px bg-gradient-to-r from-transparent via-indigo-400 to-transparent mx-auto mt-3 mb-4"></div>
            <p class="text-sm sm:text-base text-gray-500 font-light max-w-lg mx-auto">
                Descubre y participa en nuestros eventos especiales
            </p>
        </div>

        <div id="calendario-eventos" class="bg-white/90 backdrop-blur-sm border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-300 rounded-xl overflow-hidden"></div>

    </div>
</section>



<!-- Modal para detalles del evento -->
<div id="eventoModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
            <h3 id="eventoTitulo" class="text-lg leading-6 font-medium text-gray-900"></h3>
            <div class="mt-2 px-7 py-3">
                <p id="eventoDescripcion" class="text-sm text-gray-500"></p>
                <p id="eventoFecha" class="text-sm text-gray-500 mt-2"></p>
                <img id="eventoImagen" class="mt-4 mx-auto max-w-full h-auto" src="" alt="Imagen del evento" />
            </div>
            <div class="items-center px-4 py-3">
                <button id="cerrarModal" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300">
                    Cerrar
                </button>
            </div>
        </div>
    </div>
</div>


<!-- CTA Section Minimalista -->
<div class="bg-gradient-to-r from-indigo-50 to-blue-50 border-t border-b border-gray-100">
    <div class="max-w-2xl mx-auto text-center py-14 px-4 sm:py-16 sm:px-6 lg:px-8">
        <h2 class="text-2xl font-light text-gray-800 sm:text-3xl tracking-wide">
            ¿Listo para ser parte de nuestra comunidad?
        </h2>
        <p class="mt-3 text-base text-gray-600 max-w-md mx-auto">
            Únete a nosotros y descubre todo lo que Feria Sámara Market tiene para ofrecer.
        </p>
        <a asp-controller="Home" asp-action="ComoUnirte"
           class="mt-6 inline-flex items-center justify-center px-6 py-2.5 border border-gray-200
                  text-sm font-medium rounded-full text-gray-700 bg-white shadow-sm
                  hover:bg-gray-50 hover:text-blue-600 hover:border-blue-200
                  transition-all duration-300 ease-in-out focus:outline-none focus:ring-2
                  focus:ring-offset-2 focus:ring-blue-200">
            Cómo Unirte
        </a>
    </div>
</div>

   

    <!-- Ubicación Section -->
    <div id="ubicacion-section"></div>

    <!-- Donation Section -->
    <div id="donation-container"></div>

<!-- CTA Section Quiénes Somos -->
<div class="bg-gradient-to-r from-indigo-50 to-blue-50 border-t border-b border-gray-100">
    <div class="max-w-2xl mx-auto text-center py-12 px-4 sm:py-14 sm:px-6 lg:px-8">
        <h2 class="text-2xl font-light text-gray-800 sm:text-3xl tracking-wide">
            ¿Quiénes Somos?
        </h2>
        <a asp-controller="Home" asp-action="QuienesSomos"
           class="mt-5 inline-flex items-center justify-center px-6 py-2.5 border border-gray-200
                  text-sm font-medium rounded-full text-gray-700 bg-white shadow-sm
                  hover:bg-gray-50 hover:text-blue-600 hover:border-blue-200
                  transition-all duration-300 ease-in-out focus:outline-none focus:ring-2
                  focus:ring-offset-2 focus:ring-blue-200">
            Conocer más
        </a>
    </div>
</div>
    

</div>


@section Scripts {
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/moment@2.29.1/moment.js"></script>
    <script src="https://unpkg.com/moment@2.29.1/locale/es.js"></script>
    <script src="https://unpkg.com/react-big-calendar@0.33.2/dist/react-big-calendar.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/react-big-calendar@0.33.2/lib/css/react-big-calendar.css" />
    <script src="https://unpkg.com/date-fns@2.29.3/index.min.js"></script>
    <script src="https://unpkg.com/date-fns@2.29.3/locale/es/index.js"></script>

    <!-- UbicacionSection component -->
    <script src="~/js/UbicacionSection.js"></script>

    <!-- CalendarioEventos component -->
    <script src="~/js/CalendarioEventos.js"></script>

    <!-- Donation component -->
    <script src="/js/DonationComponent.js"></script>

    <!-- Carousels and other scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Código existente para los carruseles
            const featuredCarousel = document.getElementById('featured-carousel');
            const featuredSlides = document.getElementById('featured-slides');
            const currentProductName = document.getElementById('current-product-name');
            const prevButton = document.getElementById('prevFeatured');
            const nextButton = document.getElementById('nextFeatured');
            const indicatorsContainer = document.getElementById('carousel-indicators');

            let featuredIndex = 0;
            let featuredProducts = [];
            let autoAdvanceInterval;

            // Cargar imágenes desde el backend
            async function loadFeaturedProducts() {
                try {
                    const response = await fetch('/FeaturedProducts'); // Nueva ruta del controlador
                    featuredProducts = await response.json();
                    renderSlides();
                    createIndicators();
                    updateProductName();
                    updateIndicators();
                    startAutoAdvance();
                } catch (error) {
                    console.error('Error al cargar los productos destacados:', error);
                    // Mostrar mensaje de error elegante
                    featuredSlides.innerHTML = `
                        <div class="flex items-center justify-center h-full bg-gray-50">
                            <div class="text-center p-6">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                </svg>
                                <p class="text-gray-600">No se pudieron cargar los productos destacados.</p>
                                <button class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors" onclick="loadFeaturedProducts()">
                                    Reintentar
                                </button>
                            </div>
                        </div>
                    `;
                }
            }

            function renderSlides() {
                featuredSlides.innerHTML = '';
                featuredProducts.forEach((product, index) => {
                    const slide = document.createElement('div');
                    slide.className = `absolute inset-0 w-full h-full transition-opacity duration-700 ease-in-out ${index === featuredIndex ? 'opacity-100 z-10' : 'opacity-0 z-0'}`;

                    // Contenedor para la imagen con efecto de zoom suave
                    slide.innerHTML = `
                        <div class="relative w-full h-full overflow-hidden group">
                            <img src="${product.imageUrl}" alt="${product.name}"
                                 class="object-cover w-full h-full transform transition-transform duration-7000 group-hover:scale-105"
                                 onerror="this.src='/placeholder.jpg'; this.onerror=null;">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
                            <div class="absolute bottom-0 left-0 right-0 p-4 sm:p-6 text-white">
                                <h3 class="text-xl sm:text-2xl font-medium">${product.name}</h3>
                                ${product.description ? `<p class="mt-2 text-sm sm:text-base text-white/80 line-clamp-2">${product.description}</p>` : ''}
                            </div>
                        </div>
                    `;

                    featuredSlides.appendChild(slide);
                });
            }

            function createIndicators() {
                indicatorsContainer.innerHTML = '';
                featuredProducts.forEach((_, index) => {
                    const indicator = document.createElement('button');
                    indicator.className = `h-2 w-2 rounded-full mx-1 focus:outline-none transition-all duration-300 ${index === featuredIndex ? 'bg-blue-500 w-6' : 'bg-gray-300'}`;
                    indicator.setAttribute('aria-label', `Ver producto ${index + 1}`);
                    indicator.onclick = () => {
                        stopAutoAdvance();
                        showSlide(index);
                    };

                    indicatorsContainer.appendChild(indicator);
                });
            }

            function updateIndicators() {
                const indicators = indicatorsContainer.querySelectorAll('button');
                indicators.forEach((indicator, index) => {
                    if (index === featuredIndex) {
                        indicator.classList.remove('bg-gray-300', 'w-2');
                        indicator.classList.add('bg-blue-500', 'w-6');
                    } else {
                        indicator.classList.remove('bg-blue-500', 'w-6');
                        indicator.classList.add('bg-gray-300', 'w-2');
                    }
                });
            }

            function updateProductName() {
                if (featuredProducts.length > 0) {
                    currentProductName.textContent = featuredProducts[featuredIndex].name;
                } else {
                    currentProductName.textContent = "No hay productos destacados.";
                }
            }

            function showSlide(index) {
                featuredIndex = (index + featuredProducts.length) % featuredProducts.length;
                renderSlides();
                updateProductName();
                updateIndicators();
            }

            function nextSlide() {
                showSlide(featuredIndex + 1);
            }

            function prevSlide() {
                showSlide(featuredIndex - 1);
            }

            function startAutoAdvance() {
                stopAutoAdvance(); // Detener cualquier intervalo anterior
                autoAdvanceInterval = setInterval(nextSlide, 5000); // Cambiar slide cada 5 segundos
            }

            function stopAutoAdvance() {
                if (autoAdvanceInterval) {
                    clearInterval(autoAdvanceInterval);
                    autoAdvanceInterval = null;
                }
            }

            // Pausar autoavance cuando el mouse está sobre el carrusel
            featuredCarousel.addEventListener('mouseenter', stopAutoAdvance);
            featuredCarousel.addEventListener('mouseleave', startAutoAdvance);

            prevButton.addEventListener('click', () => {
                stopAutoAdvance(); // Detener autoavance temporalmente cuando el usuario interactúa
                prevSlide();
            });

            nextButton.addEventListener('click', () => {
                stopAutoAdvance(); // Detener autoavance temporalmente cuando el usuario interactúa
                nextSlide();
            });

            // Iniciar carga de productos
            loadFeaturedProducts();
        });
    </script>

    <!-- Reemplaza el script del carrusel existente con este -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Carousel elements
            const carousel = document.getElementById('carousel');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const indicators = document.getElementById('indicators');

            let currentSlide = 0;
            let slides = [];

            // Cargar imágenes desde el backend
            async function loadCarouselImages() {
                try {
                    const response = await fetch('/Carousel/GetCarouselImages');
                    slides = await response.json();

                    // Si no hay imágenes, usar las predeterminadas
                    if (slides.length === 0) {
                        slides = [
                            { url: '/imagenes/carousel-1.jpeg', alt: 'Feria Sámara Market' },
                            { url: '/imagenes/carousel-2.jpeg', alt: 'Productos locales' },
                            { url: '/imagenes/carousel-3.jpeg', alt: 'Emprendedores' },
                            { url: '/imagenes/carousel-4.jpeg', alt: 'Playa Sámara' },
                            { url: '/imagenes/carousel-5.jpg', alt: 'Artesanías locales' },
                            { url: '/imagenes/carousel-6.jpeg', alt: 'play' },
                            { url: '/imagenes/carousel-7.jpeg', alt: 'art' }
                        ];
                    }

                    // Ordenar por el campo Order
                    slides.sort((a, b) => a.order - b.order);

                    // Inicializar el carrusel
                    initCarousel();
                } catch (error) {
                    console.error('Error al cargar imágenes del carrusel:', error);
                    // Usar imágenes predeterminadas en caso de error
                    slides = [
                        { url: '/imagenes/carousel-1.jpeg', alt: 'Feria Sámara Market' },
                        { url: '/imagenes/carousel-2.jpeg', alt: 'Productos locales' },
                        { url: '/imagenes/carousel-3.jpeg', alt: 'Emprendedores' }
                    ];
                    initCarousel();
                }
            }

            // Create slides dynamically
            function createSlide(slide, index) {
                const div = document.createElement('div');
                div.className = `absolute inset-0 w-full h-full transition-opacity duration-500 ${index === 0 ? 'opacity-100' : 'opacity-0'}`;
                const img = document.createElement('img');
                img.src = slide.url;
                img.alt = slide.alt;
                img.className = 'h-full w-full object-cover';
                img.onerror = function () {
                    console.error(`Error loading image: ${slide.url}`);
                    this.src = '/imagenes/placeholder.jpg'; // Use placeholder for missing images
                };
                div.appendChild(img);
                return div;
            }

            // Create indicator buttons
            function createIndicator(index) {
                const button = document.createElement('button');
                button.className = `w-3 h-3 rounded-full ${index === 0 ? 'bg-white' : 'bg-white bg-opacity-50'}`;
                button.addEventListener('click', () => showSlide(index));
                return button;
            }

            // Load slides and indicators
            function initCarousel() {
                // Limpiar el carrusel y los indicadores
                const slideElements = Array.from(carousel.children).filter(child =>
                    child !== prevButton && child !== nextButton && child !== indicators);

                slideElements.forEach(el => el.remove());
                indicators.innerHTML = '';

                // Cargar las nuevas diapositivas e indicadores
                slides.forEach((slide, index) => {
                    carousel.insertBefore(createSlide(slide, index), nextButton);
                    indicators.appendChild(createIndicator(index));
                });

                // Mostrar la primera diapositiva
                currentSlide = 0;

                // Iniciar autoavance
                startAutoAdvance();
            }

            // Show a specific slide
            function showSlide(index) {
                const slideElements = Array.from(carousel.children).filter(child =>
                    child !== prevButton && child !== nextButton && child !== indicators);

                // Update slide visibility
                slideElements[currentSlide].classList.remove('opacity-100');
                slideElements[currentSlide].classList.add('opacity-0');
                slideElements[index].classList.remove('opacity-0');
                slideElements[index].classList.add('opacity-100');

                // Update indicators
                indicators.children[currentSlide].classList.remove('bg-white');
                indicators.children[currentSlide].classList.add('bg-opacity-50');
                indicators.children[index].classList.remove('bg-opacity-50');
                indicators.children[index].classList.add('bg-white');

                currentSlide = index;
            }

            // Show next slide
            function nextSlide() {
                showSlide((currentSlide + 1) % slides.length);
            }

            // Show previous slide
            function prevSlide() {
                showSlide((currentSlide - 1 + slides.length) % slides.length);
            }

            // Auto-advance carousel
            let autoAdvanceInterval;

            function startAutoAdvance() {
                // Limpiar intervalo existente si hay uno
                if (autoAdvanceInterval) {
                    clearInterval(autoAdvanceInterval);
                }

                // Iniciar nuevo intervalo
                autoAdvanceInterval = setInterval(nextSlide, 5000);
            }

            // Initialize carousel
            loadCarouselImages();
            nextButton.addEventListener('click', function() {
                nextSlide();
                // Reiniciar autoavance cuando el usuario interactúa
                startAutoAdvance();
            });
            prevButton.addEventListener('click', function() {
                prevSlide();
                // Reiniciar autoavance cuando el usuario interactúa
                startAutoAdvance();
            });
        });
    </script>
}
}